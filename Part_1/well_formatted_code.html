

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to format your code well &mdash; Formalising Mathematics 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Part 2: Tactics" href="../Part_2/Part_2.html" />
    <link rel="prev" title="The axiom of choice" href="the_axiom_of_choice.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Formalising Mathematics
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/install.html">Installing Lean</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Part_1.html">Part 1: Lean tips</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="typesandterms.html">Types and terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="equality.html">Equality</a></li>
<li class="toctree-l2"><a class="reference internal" href="threekindsoftypes.html">The three kinds of types</a></li>
<li class="toctree-l2"><a class="reference internal" href="brackets.html">Brackets in function inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="precedence.html">Notation and precedence</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures.html">Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="dot_notation.html">Dot notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="coercions.html">Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_axiom_of_choice.html">The axiom of choice</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to format your code well</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#indentation">Indentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spaces-between-operators">Spaces between operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#have-only-one-goal">Have only one goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-docstrings">Module docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#want-to-know-more">Want to know more?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Part_2/Part_2.html">Part 2: Tactics</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Formalising Mathematics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Part_1.html">Part 1: Lean tips</a></li>
      <li class="breadcrumb-item active">How to format your code well</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Part_1/well_formatted_code.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-format-your-code-well">
<span id="wellformattedcode"></span><h1>How to format your code well<a class="headerlink" href="#how-to-format-your-code-well" title="Link to this heading"></a></h1>
<p>The first time this course ran I did not emphasize good code layout and when I was marking the projects I regretted this. Formatting your code correctly helps a great deal with readability (as I discovered) and so I now look more favourably on people who do this properly. The code I write in the course repository should always conform to the correct standards. Here are the basics.</p>
<section id="indentation">
<h2>Indentation<a class="headerlink" href="#indentation" title="Link to this heading"></a></h2>
<p>Code in a tactic block gets indented two spaces.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="c1">-- `by` at the end</span>
  <span class="n">intro</span> <span class="n">h</span> <span class="c1">-- proof is indented two spaces in</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
</pre></div>
</div>
<p>If you have a long theorem statement and want to write it over two or more lines
then you should indent subsequent lines with <em>four</em> spaces, for example:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">Mathlib.Data.Nat.Basic</span>

<span class="kd">theorem</span> <span class="n">le_induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span><span class="o">}</span>
    <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">P</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
    <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">apply</span> <span class="n">Nat.le.rec</span>
  <span class="bp">·</span> <span class="n">exact</span> <span class="n">h0</span>
  <span class="bp">·</span> <span class="n">exact</span> <span class="n">h1</span> <span class="n">_</span>
</pre></div>
</div>
</section>
<section id="spaces-between-operators">
<h2>Spaces between operators<a class="headerlink" href="#spaces-between-operators" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">b</span></code>, not <code class="docutils literal notranslate"><span class="pre">a=b</span></code>. See above. Similarly <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">^</span> <span class="pre">b</span></code> and so on. Also <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">T</span></code> not <code class="docutils literal notranslate"><span class="pre">x:T</span></code>, and <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">:=</span> <span class="pre">bar</span></code> not <code class="docutils literal notranslate"><span class="pre">foo:=bar</span></code>.</p>
</section>
<section id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Link to this heading"></a></h2>
<p>You don’t have to put a comment on every line of code, but please feel free to put comments at points where something is actually happening. Code with comments is easier to read. Just one line <code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">write</span> <span class="pre">explanation</span> <span class="pre">here</span></code> above a tactic is already helpful. For multi-line
comments, use <code class="docutils literal notranslate"><span class="pre">/-</span></code> and <code class="docutils literal notranslate"><span class="pre">-/</span></code></p>
</section>
<section id="have-only-one-goal">
<h2>Have only one goal<a class="headerlink" href="#have-only-one-goal" title="Link to this heading"></a></h2>
<p>Sometimes you can end up with more than one goal. This can happen for two reasons. Firstly, perhaps you manually created a new goal. For example, perhaps you wrote <code class="docutils literal notranslate"><span class="pre">have</span> <span class="pre">intermediate_result</span> <span class="pre">:</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">c</span> <span class="pre">:=</span> <span class="pre">by</span> <span class="pre">``</span> <span class="pre">or</span> <span class="pre">``suffices</span> <span class="pre">h</span> <span class="pre">:</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">c</span> <span class="pre">by</span></code>. You just created an extra goal on top of the goal which was already there, so the proof should be indented two more spaces.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="c1">-- you made a second goal</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
    <span class="c1">-- other lines of code would go here, also indented</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h2</span><span class="o">]</span> <span class="c1">-- back to only two space indentation</span>
</pre></div>
</div>
<p>The other way it can happen is if you use a tactic or apply a function which changes your old goal into more than one goal.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hP</span> <span class="o">:</span> <span class="n">P</span><span class="o">)</span> <span class="o">(</span><span class="n">hQ</span> <span class="o">:</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">constructor</span> <span class="c1">-- this tactic replaced the goal we were working on with two goals</span>
  <span class="bp">·</span> <span class="c1">-- so use the right kind of dot (`\.`) and work with one goal at a time</span>
    <span class="n">exact</span> <span class="n">hP</span>
  <span class="bp">·</span> <span class="n">exact</span> <span class="n">hQ</span> <span class="c1">-- note also extra indentation</span>
</pre></div>
</div>
</section>
<section id="module-docstrings">
<h2>Module docstrings<a class="headerlink" href="#module-docstrings" title="Link to this heading"></a></h2>
<p>For your projects, you might want to consider writing “module docstrings”, which is a fancy
name for “a big comment at the top of each file explaining what happens in the file.” Look
at any file in mathlib to see an example, or you can see one <a class="reference external" href="https://leanprover-community.github.io/contribute/doc.html">here</a> .</p>
</section>
<section id="want-to-know-more">
<h2>Want to know more?<a class="headerlink" href="#want-to-know-more" title="Link to this heading"></a></h2>
<p>Check out the mathlib library style guidelines <a class="reference external" href="https://leanprover-community.github.io/contribute/style.html">on the Lean community pages</a> – not all of it applies to us, but most of the section on tactic mode does.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="the_axiom_of_choice.html" class="btn btn-neutral float-left" title="The axiom of choice" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Part_2/Part_2.html" class="btn btn-neutral float-right" title="Part 2: Tactics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Bhavik Mehta.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>