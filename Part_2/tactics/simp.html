

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>simp &mdash; Formalising Mathematics 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="simpa" href="simpa.html" />
    <link rel="prev" title="rw" href="rw.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Formalising Mathematics
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/install.html">Installing Lean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Part_1/Part_1.html">Part 1: Lean tips</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Part_2.html">Part 2: Tactics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cheatsheet.html">Tactic cheatsheet</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="tactics.html">Tactic documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="apply.html">apply</a></li>
<li class="toctree-l3"><a class="reference internal" href="assumption.html">assumption</a></li>
<li class="toctree-l3"><a class="reference internal" href="by_cases.html">by_cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="by_contra.html">by_contra</a></li>
<li class="toctree-l3"><a class="reference internal" href="cases.html">cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="change.html">change</a></li>
<li class="toctree-l3"><a class="reference internal" href="choose.html">choose</a></li>
<li class="toctree-l3"><a class="reference internal" href="constructor.html">constructor</a></li>
<li class="toctree-l3"><a class="reference internal" href="convert.html">convert</a></li>
<li class="toctree-l3"><a class="reference internal" href="exact.html">exact</a></li>
<li class="toctree-l3"><a class="reference internal" href="exfalso.html">exfalso</a></li>
<li class="toctree-l3"><a class="reference internal" href="ext.html">ext</a></li>
<li class="toctree-l3"><a class="reference internal" href="have.html">have</a></li>
<li class="toctree-l3"><a class="reference internal" href="induction.html">induction</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html">intro</a></li>
<li class="toctree-l3"><a class="reference internal" href="intros.html">intros</a></li>
<li class="toctree-l3"><a class="reference internal" href="left.html">left</a></li>
<li class="toctree-l3"><a class="reference internal" href="linarith.html">linarith</a></li>
<li class="toctree-l3"><a class="reference internal" href="nlinarith.html">nlinarith</a></li>
<li class="toctree-l3"><a class="reference internal" href="norm_num.html">norm_num</a></li>
<li class="toctree-l3"><a class="reference internal" href="nth_rw.html">nth_rw</a></li>
<li class="toctree-l3"><a class="reference internal" href="obtain.html">obtain</a></li>
<li class="toctree-l3"><a class="reference internal" href="positivity.html">positivity</a></li>
<li class="toctree-l3"><a class="reference internal" href="rcases.html">rcases</a></li>
<li class="toctree-l3"><a class="reference internal" href="refine.html">refine</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfl.html">rfl</a></li>
<li class="toctree-l3"><a class="reference internal" href="right.html">right</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html">ring</a></li>
<li class="toctree-l3"><a class="reference internal" href="rintro.html">rintro</a></li>
<li class="toctree-l3"><a class="reference internal" href="rw.html">rw</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">simp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#details">Details</a></li>
<li class="toctree-l4"><a class="reference internal" href="#further-notes">Further notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simpa.html">simpa</a></li>
<li class="toctree-l3"><a class="reference internal" href="specialize.html">specialize</a></li>
<li class="toctree-l3"><a class="reference internal" href="use.html">use</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Formalising Mathematics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Part_2.html">Part 2: Tactics</a></li>
          <li class="breadcrumb-item"><a href="tactics.html">Tactic documentation</a></li>
      <li class="breadcrumb-item active">simp</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Part_2/tactics/simp.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="simp">
<span id="tac-simp"></span><h1>simp<a class="headerlink" href="#simp" title="Link to this heading"></a></h1>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>There are many lemmas of the form <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code> or <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">↔</span> <span class="pre">Q</span></code> in <code class="docutils literal notranslate"><span class="pre">mathlib</span></code> which are “tagged” with the <code class="docutils literal notranslate"><span class="pre">&#64;[simp]</span></code> tag. Note that these kinds of lemmas are ones for which the <code class="docutils literal notranslate"><span class="pre">rw</span></code> tactic can be used. A lemma tagged with <code class="docutils literal notranslate"><span class="pre">&#64;[simp]</span></code> is called a “simp lemma”.</p>
<p>When Lean’s simplifier <code class="docutils literal notranslate"><span class="pre">simp</span></code> is run, it tries to find simp lemmas for which the left hand side of the lemma is in the goal. It then rewrites the lemma and continues. Ultimately what happens is that the goal ends up simplified, and, ideally, solved.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>There are hundreds of lemmas in <code class="docutils literal notranslate"><span class="pre">mathlib</span></code> of the form <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">x</span></code> or <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">0</span></code>, where one side is manifestly simpler than the other (in the sense that a mathematician would instinctively replace the more complex side by the simpler side if they were trying to prove a theorem). In Lean, such a lemma might be tagged with the <code class="docutils literal notranslate"><span class="pre">&#64;[simp]</span></code> tag. A tag on a lemma or definition does nothing mathematical; it is just a flag for certain tactics. The convention for <code class="docutils literal notranslate"><span class="pre">&#64;[simp]</span></code> lemmas in Lean is that the left hand side of such a lemma should be the more complicated side. For example Lean has</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span> <span class="n">add_zero</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">...</span>
<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span> <span class="n">zero_add</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>
</div>
<p>(proofs omitted). Because these lemmas are tagged with <code class="docutils literal notranslate"><span class="pre">&#64;[simp]</span></code>, the following proof works:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span>
</pre></div>
</div>
<p>If you want to know which lemmas <code class="docutils literal notranslate"><span class="pre">simp</span></code> used, you can instead use <code class="docutils literal notranslate"><span class="pre">simp?</span></code>, which gives an output listing the theorems which <code class="docutils literal notranslate"><span class="pre">simp</span></code> rewrote to make the progress which it made.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>If you are doing a proof by induction, then <code class="docutils literal notranslate"><span class="pre">simp</span></code> will often deal with the base case, because it knows lots of ways to simplify goals with a <code class="docutils literal notranslate"><span class="pre">0</span></code> in. Here is <code class="docutils literal notranslate"><span class="pre">simp</span></code> being used to prove that <span class="math notranslate nohighlight">\(\sum_{i=0}^{n-1}i=n(n-1)/2\)</span>:</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kn">open</span> <span class="n">BigOperators</span> <span class="n">Finset</span> <span class="c1">-- ∑ notation and access to `Finset.range`</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span>
   <span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
<span class="n">induction&#39;</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span>
<span class="bp">·</span>  <span class="c1">-- base case: sum over empty type is 0 * (0 - 1) / 2</span>
   <span class="n">simp</span>
<span class="bp">·</span> <span class="c1">-- inductive step</span>
   <span class="n">rw</span> <span class="o">[</span><span class="n">sum_range_succ</span><span class="o">,</span> <span class="n">hd</span><span class="o">]</span>
   <span class="n">simp</span> <span class="c1">-- tidies up and reduces the goal to</span>
         <span class="c1">-- ⊢ ↑d * (↑d - 1) / 2 + ↑d = (↑d + 1) * ↑d / 2</span>
   <span class="n">ring</span> <span class="c1">-- a more appropriate tactic to finish the job</span>
</pre></div>
</div>
</section>
<section id="details">
<h2>Details<a class="headerlink" href="#details" title="Link to this heading"></a></h2>
<p>Note that <code class="docutils literal notranslate"><span class="pre">simp</span></code>, like <code class="docutils literal notranslate"><span class="pre">rw</span></code>, works up to <a class="reference internal" href="../../Part_1/equality.html#syneq"><span class="std std-ref">syntactic equality</span></a>. In other words, if your goal mentions <code class="docutils literal notranslate"><span class="pre">x</span></code> and there is a simp lemma <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">x'</span> <span class="pre">=</span> <span class="pre">y</span></code> where <code class="docutils literal notranslate"><span class="pre">x'</span></code> is definitionally, but not syntactically, equal to <code class="docutils literal notranslate"><span class="pre">x</span></code>, then <code class="docutils literal notranslate"><span class="pre">simp</span></code> will not do the rewrite; this is because <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[h]</span></code> fails.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">simp</span></code> on goals too: <code class="docutils literal notranslate"><span class="pre">simp</span> <span class="pre">at</span> <span class="pre">h</span></code> will run the simplifier on <code class="docutils literal notranslate"><span class="pre">h</span></code>.</p>
<p>There’s quite a lot to say about the <code class="docutils literal notranslate"><span class="pre">simp</span></code> tactic. More details of how to use it can be found in Theorem Proving In Lean, in the section “using the simplifier” <a class="reference external" href="https://leanprover.github.io/theorem_proving_in_lean/tactics.html#using-the-simplifier">here</a> .</p>
</section>
<section id="further-notes">
<h2>Further notes<a class="headerlink" href="#further-notes" title="Link to this heading"></a></h2>
<p>The related tactic <code class="docutils literal notranslate"><span class="pre">simp?</span></code> attempts to figure out exactly which lemmas <code class="docutils literal notranslate"><span class="pre">simp</span></code> used.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rw.html" class="btn btn-neutral float-left" title="rw" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="simpa.html" class="btn btn-neutral float-right" title="simpa" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Bhavik Mehta.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>